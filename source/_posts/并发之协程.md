---
title: 什么是协程
date: 2018-06-22 11:37:19
tags: [java 并发 线程]
categories: java
---
# 什么是进程和线程
进程是应用程序的启动实例，进程拥有代码和打开的文件资源、数据资源、独立的内存空间。
线程从属于进程，是程序的实际执行者，一个进程至少包含一个主线程，也可以有多个子线程。线程有自己的栈空间。

对操作系统来说，线程是最小的执行单元，进程是最小的资源管理单元。

Java中线程具有五种状态
* 初始化
* 可运行
* 运行中
* 阻塞
* 销毁

JVM需要通过操作系统内核中的TCB（Thread Control Block）模块来改变线程状态，这一过程需要消耗一定的CPU资源。

# 什么是协程
协程，英文Coroutines，是一种比线程更加轻量级的存在。一个线程可以拥有多个协程。协程不是被操作系统内核所管理，而完全由程序所控制（也就是用户态执行）。

协程的暂停和线程的阻塞是有本质的区别的。协程的暂停完全是由程序控制，线程的阻塞状态是由操作系统内核来进行切换。

因此，**协程的开销远远小于线程的开销。**

# 协程的应用
Java语言并没有对协程的原生支持，不过某些开源框架模拟出协程的功能。
例如**Kilim** ， [https://github.com/kilim/kilim](https://github.com/kilim/kilim)

Python可以通过yield/send的方式实现协程，在python3.5以后，async/await成为了更好的替代方案

Go语言支持
