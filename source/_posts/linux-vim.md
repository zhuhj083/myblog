---
title: Linux vim操作说明
date: 2018-05-14 15:26:14
tags: [linix,vim]
categories: linux
---
# vi与vim

vi分为3个模式：

一般模式：默认模式，可以上下左右按键移动光标，可以删除字符或删除整行，可以复制、粘贴
编辑模式：按下“i,I,o,O,a,A,r,R”等任一字母进入编辑模式，按Esc退出到一般模式
命令行模式：一般模式下，输入“：、/、?”三个中任一个按钮

## 移动光标的方法
| 按键                   | 描述                                              |
| ---------------------- | ------------------------------------------------- |
| h或左箭头键            | 向左移动一个字符                                  |
| j或下                  | 向下移动一个字符                                  |
| k或上                  | 向上移动一个字符                                  |
| l或右                  | 向右移动一个字符                                  |
| 先按数字，再按上下左右 | 移动多个字符                                      |
| Ctrl+f                 | 屏幕下移一页  相当于 PgDn键                       |
| Ctrl+b                 | 屏幕上移一页，相当于PgUp键                        |
| Ctrl+d                 | 屏幕向下移动半页                                  |
| Ctrl+u                 | 屏幕向上移动半页                                  |
| +                      | 光标移动到非空格符的下一行                        |
| -                      | 光标移动到非空格符的上一行                        |
| n  space               | 按下数字，再按空格，光标会向右移动这一行的n个字符 |
| 0 或 Home              | 移动到这一行最前面                                |
| $ 或 End               | 移动到这一行最后面                                |
| H                      | 光标移动到这个屏幕最上方那一行的第一个字符        |
| M                      | 光标移动到这个屏幕的中央的那一行的第一个字符      |
| L                      | 光标移动到这个屏幕最下方第一行的第一个字符        |
| G                      | 移动到这个文件的最后一行                          |
| nG                     | 移动到这个文件的第n行                             |
| gg                     | 移动到这个文件的第一行，1G                        |
| n Enter                | 向下移动n行                                       |

## 查找和替换
| 按键                  | 描述                                                   |
| --------------------- | ------------------------------------------------------ |
| /word                 | 向下查找一个word字符串                                 |
| ?word                 | 下上查找一个word字符串                                 |
| n                     | n是英文按键，代表重复前一个查找                        |
| N                     | “反向”进行前一个查找操作                               |
| :n1,n2s/word1/word2/g | n1、n2为数字，在第n1和n2行之间查找word1，并替换为word2 |
| :1,$s/word1/word2/g   | 第一行到最后一行之间，查找并替换                       |
| :1,$s/word1/word2/gc  | 替换之前，显示提示符，让用户确认                       |

## 删除、复制与粘贴
| 按键   | 描述                                                                       |
| ------ | -------------------------------------------------------------------------- |
| x,X    | 在一行中，x为向后删除一个字符，X为向前删除一个常用字符                     |
| nx     | n为数字，连续向后删除n个字符                                               |
| dd     | 删除光标所在行                                                             |
| ndd    | 删除光标所在的向下n行                                                      |
| d1G    | 删除光标所在行到第一行的所有数据                                           |
| dG     | 删除光标所在行到最后一行的所有数组                                         |
| d$     | 删除从光标所在处到该行的最后一个字符                                       |
| d0     | 删除从光标所在处到该行的第一个字符                                         |
| yy     | 复制光标所在行                                                             |
| nyy    | 复制光标所在的向下n行                                                      |
| y1G    | 复制光标所在行到第一行的数据                                               |
| yG     | 复制光标所在行到最后一行                                                   |
| y$     | 复制光标所在处到行尾的所有数据                                             |
| y0     | 复制光标所在处到行首的所有数据                                             |
| p，P   | p为将已复制的数据在光标的下一行粘贴<br>P为将已复制的数据在光标的上一行粘贴 |
| J      | 将光标所在行与下一行的数据结合成同一行                                     |
| c      | 重复删除多个数据，例如向下删除10行，【10cj】                               |
| u      | 复原前一个操作                                                             |
| Ctrl+r | 重做上一个操作                                                             |
| .      | 小数点，重复上一个操作                                                     |

## 一般模式切换到编辑模式的可用按钮说明
| 按键 | 描述                                                                                             |
| ---- | ------------------------------------------------------------------------------------------------ |
| i,I  | 进入插入模式<br>i为从目前光标所在处插入，I为在目前光标所在行的一个非空格符处开始插入             |
| a，A | 进入插入模式<br>a为从目前光标所在的下一个字符出开始插入，A为从光标所在行的最后一个字符处开始插入 |
| o，O | 进入插入模式<br>o为在光标所在行的下一行插入新的一行<br>O为在目前光标所在行的上一行插入一行       |
| r，R | 进入替换模式<br>r只会替换光标所在的字符一次<br>R会一直替换光标所在的字符，只要按下Esc            |

## 一般模式切换到命令行模式的可用按钮说明
| 按键                | 描述                                                     |
| ------------------- | -------------------------------------------------------- |
| :w                  | 保存，将编辑的数据写入硬盘中                             |
| :w!                 | 强行保存，是否可以写入与权限有关                         |
| :q                  | 离开vi                                                   |
| :q!                 | 强制离开不保存                                           |
| :wq                 | 保存后离开，：wq!则为强行保存后离开                      |
| ZZ                  | 若文件没有更改，则不保存离开，若文件更改了，则保存后离开 |
| :w [filename]       | 将编辑的数据保存为另一个文件（类似于另存为文件）         |
| :r [filename]       | 将“filename”这个文件内容加到光标所在行后面               |
| :n1.n2 w [filename] | 将n1到n2之间的内容保存为filename这个文件                 |
| :! command          | 暂时离开vi到命令行模式下执行cammand的显示结果            |
| :set nu             | 显示行号                                                 |
| :set nonu           | 与set nu相反，取消行号                                   |

## vim块选择
| 按键   | 描述                                 |
| ------ | ------------------------------------ |
| v      | 字符选择，会将光标经过的地方反白选择 |
| V      | 行选择，会将光标经过的行反白选择则   |
| ctrl+v | 块选择，可以用长方形的方式选择数据   |
| y      | 将反白的地方复制                     |
| d      | 将反白的地方删除                     |

## 多文件编辑
| 按键   | 描述                          |
| ------ | ----------------------------- |
| :n     | 编辑下一个文件                |
| :N     | 编辑上一个文件                |
| :files | 列出目前这个vim打开的所有文件 |

## 多窗口功能
在命令行模式，输入:sp {filename},filename可有可无
如果想在新窗口启动另一个文件，就加入另一个文件的文件名，否则仅输入:sp，出现的是同一个文件在两个窗口打开

| 按键                | 描述                                                                                             |
| ------------------- | ------------------------------------------------------------------------------------------------ |
| :sp {filename}      | 打开一个新口                                                                                     |
| Ctrl+w+j，Ctrl+w+下 | 按键的按法是：先按住Ctrl不放，再按下w后放开所有的键<br>然后在按下j或下，则光标可以移动到下方窗口 |
| Ctrl+w+k,Ctrl+w+上  | 同上，不过光标移动到上方窗口                                                                     |
| Ctrl+w+q            | 其实就是:q结束离开，关闭下方窗口                                                                 |

## vim环境设置
在一般模式时，输入“:set all”可以显示环境设置参数

| 按键                             | 描述                                                                                                   |
| -------------------------------- | ------------------------------------------------------------------------------------------------------ |
| :set nu ， :set nonu             | 设置与取消行号                                                                                         |
| :set hlsearch ，:set nohlsearch  | hlsearch 就是high light search  高亮度查找<br>这个设置就是是否将查找的字符串反白的设置。默认是hlsearch |
| :set autoindent,:set noautoindet | 表示是否自动缩排                                                                                       |
| :set backup                      | 是否自动保存备份文件，一般是nobackup<br>否则，改动任何文件，原文件会另存为一个文件名为filename~的文件  |
| :set ruler                       | 显示或不显示右下角的一些状态                                                                           |
| :set showmode                    | 是否要显示 --INSERT--之类的字眼                                                                        |
| :set all                         | 显示目前所有的环境参数设置值                                                                           |
| :set                             | 显示与系统默认值不同的设置参数                                                                         |

整体vim的设置值一般是放置在/etc/vimrc这个文件中，不过不建议修改它。
你可以修改~/.vimrc这个文件（默认不存在，请你自行手动创建）
